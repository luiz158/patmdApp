<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:r="http://richfaces.org">

<ui:composition template="/templates/main.xhtml">
	<ui:define name="content">

		<r:notifyMessages stayTime="2000" />
		<h:form id="mainForm" prependId="false">
			<r:outputPanel ajaxRendered="true">
				<r:region>

					<h:commandButton action="#{viewBiopsies.add}" value="+" />
					<h3 class="tcentered">Biopsias</h3>
					<r:dataTable value="#{biopsies}" var="b" rowKeyVar="rowNum" styleClass="centered" style="width: 800px;">
						<r:column styleClass="tcentered">
							<f:facet name="header">#</f:facet>
							<h:outputText value="#{rowNum+1}." />
						</r:column>
						<r:column styleClass="tcentered">
							<f:facet name="header">Recibida</f:facet>
							<h:outputText value="#{b.receptionDate}">
								<f:converter binding="#{converterForDate}" />
							</h:outputText>
						</r:column>
						<r:column styleClass="tcentered">
							<f:facet name="header">Examinada</f:facet>
							<h:outputText value="#{b.examDate}">
								<f:converter binding="#{converterForDate}" />
							</h:outputText>
						</r:column>
						<r:column styleClass="tcentered">
							<f:facet name="header">Paciente</f:facet>
							<h:outputText value="#{b.pacient.fullName}" />
						</r:column>
						<r:column styleClass="tcentered">
							<f:facet name="header">Doctor</f:facet>
							<h:outputText value="#{b.doctor.fullName}" />
						</r:column>
						<r:column styleClass="tcentered">
							<f:facet name="header">ADICAP</f:facet>
							<h:outputText value="#{b.adicap.code}" />
						</r:column>
						<r:column styleClass="tcentered">
							<f:facet name="header">.</f:facet>
							<r:commandLink action="biopsy.xhtml">
								<h:graphicImage library="images/icons" name="edit.png" alt="Edit" />
								<f:setPropertyActionListener target="#{viewBiopsy.managedBiopsy}" value="#{b}" />
							</r:commandLink>
							&nbsp;
							<r:commandLink>
								<h:graphicImage library="images/icons" name="view.png" alt="View" />
								<f:setPropertyActionListener target="#{viewBiopsy.managedBiopsy}" value="#{b}" />
							</r:commandLink>
						</r:column>
					</r:dataTable>

				</r:region>
			</r:outputPanel>
		</h:form>

	</ui:define>
</ui:composition>
</html>
